FROM openjdk:8-jdk-alpine

ENV urlDB={{_DDB_URL_}}
ENV passwordDB={{_DDB_PASSWORD_}}
ENV usernameDB={{_DDB_USERNAME_}}
ENV awsAppId={{_AWS_APP_ID_}}
ENV awsPinpointAccessKey={{_AWS_PINPOINT_ACCESS_KEY_}}
ENV awsPinpointSecretKey={{_AWS_PINPOINT_SECRET_KEY_}}
ENV MONGODB_HOST={{_MONGODB_HOST_}}
ENV MONGODB_NAME={{_MONGODB_NAME_}}
ENV MONGODB_PORT={{_MONGODB_PORT_}}
ENV DB_MONGO_USERNAME={{_DB_MONGO_USERNAME_}}
ENV DB_MONGO_PASSWORD={{_DB_MONGO_PASSWORD_}}
ENV KEYSTORE_PATH={{_KEYSTORE_PATH_}}
ENV KEYSTORE_PASSWORD={{_KEYSTORE_PASSWORD_}}

ARG JAR_FILE=target/*.jar
COPY ${JAR_FILE} app.jar

EXPOSE 8080

ENTRYPOINT java -jar /app.jar --DB_PASSWORD=${passwordDB} --DB_URL=${urlDB} --DB_USERNAME=${usernameDB} --AWS.APP-ID=${awsAppId} --AWS.PINPOINT.ACCESS-KEY=${awsPinpointAccessKey} --AWS.PINPOINT.SECRET-KEY=${awsPinpointSecretKey} --MONGODB_HOST=${MONGODB_HOST} --MONGODB_NAME=${MONGODB_NAME} --MONGODB_PORT=${MONGODB_PORT} --DB_MONGO_USERNAME=${DB_MONGO_USERNAME} --DB_MONGO_PASSWORD=${DB_MONGO_PASSWORD} --KEYSTORE_PATH=${KEYSTORE_PATH} --KEYSTORE_PASSWORD=${KEYSTORE_PASSWORD}
